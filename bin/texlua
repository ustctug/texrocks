#!/usr/bin/env -S luahbtex --luaonly
-- luacheck: ignore 143
---@diagnostic disable: undefined-field
if os.getenv "LUA_PATH" then
    require 'texrocks'.main(arg)
else
    local cmd = {
        "lx",
        "--lua-version=" .. _VERSION:gsub(".* ", ""),
        "lua",
        "--lua=" .. arg[0],
        "--no-loader",
        "--",
    }
    for _, v in ipairs(arg) do
        table.insert(cmd, v)
    end
    os.exec(cmd)
end
